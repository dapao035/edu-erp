(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-student-bind"],{"3c66":function(e,t,n){"use strict";var s=n("dbce");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(n("eee5")),a=s(n("e7f9")),c=(s(n("55c9")),{data:function(){return{name:"",password:"",mobile:"",code:"",sendBtnDisabled:!1,sendSec:0,typeIndex:0,types:["学生","家长"],clazzList:[],clazzIndex:0}},onLoad:function(){this.loadClazz()},onShow:function(){},methods:{loadClazz:function(){var e=this;a.get("student/clazzList",{},(function(t){"success"==t.result?(e.clazzList=t.data.clazz,e.types=t.data.role):i.showError(t.msg)}))},pickerChange:function(e){this.typeIndex=e.detail.value},clazzChange:function(e){this.clazzIndex=e.detail.value},handleLogin:function(){""!=this.mobile?""!=this.code?""!=this.name?""!=this.password?a.post("student/bind",{mobile:this.mobile,code:this.code,name:this.name,clazz:this.clazzList[this.clazzIndex],password:this.password,type:this.typeIndex+1},(function(e){"success"==e.result?(i.showSuccess(e.msg),uni.navigateTo({url:"/pages/index/index",animationDuration:200})):i.modelShow("错误提示",e.msg)})):i.showError("请输入绑定密码"):i.showError("请输入学生姓名"):i.showError("请输入短信验证码"):i.showError("请输入账号")},sendSms:function(){var e=this;if(0!=i.isPhoneNumber(this.mobile)){this.sendBtnDisabled=!0,this.sendSec=30;var t=setInterval((function(){0==e.sendSec?(e.sendBtnDisabled=!1,clearInterval(t)):(e.sendBtnDisabled=!0,e.sendSec--)}),1e3);this.handleSent()}else i.showError("无效手机号")},handleSent:function(){var e=this;a.post("sendsmscode",{mob:this.mobile},(function(t){"success"==t.result?i.showSuccess(t.msg):(t.data>0&&(e.sendSec=t.data),i.showError(t.msg))}))}}});t.default=c},"829f":function(e,t,n){"use strict";n.r(t);var s=n("3c66"),i=n.n(s);for(var a in s)"default"!==a&&function(e){n.d(t,e,(function(){return s[e]}))}(a);t["default"]=i.a},"82e6":function(e,t,n){"use strict";var s;n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return s}));var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"content"},[n("v-uni-view",[n("v-uni-view",{staticClass:"cu-form-group"},[n("v-uni-view",{staticClass:"title"},[e._v("用户身份")]),n("v-uni-picker",{attrs:{value:e.typeIndex,range:e.types},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.pickerChange.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"picker"},[e._v(e._s(e.types[e.typeIndex]))])],1)],1),n("v-uni-view",{staticClass:"cu-form-group"},[n("v-uni-view",{staticClass:"title"},[e._v("选择班级")]),n("v-uni-picker",{attrs:{value:e.clazzIndex,range:e.clazzList},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.clazzChange.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"picker"},[e._v(e._s(e.clazzList[e.clazzIndex]))])],1)],1),n("v-uni-view",{staticClass:"cu-form-group"},[n("v-uni-view",{staticClass:"title"},[e._v("学生姓名")]),n("v-uni-input",{attrs:{placeholder:"请输入",name:"input",type:"text"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),n("v-uni-view",{staticClass:"cu-form-group"},[n("v-uni-view",{staticClass:"title"},[e._v("绑定密码")]),n("v-uni-input",{attrs:{placeholder:"请联系负责老师获取密码",name:"input",type:"text"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),n("v-uni-view",{staticClass:"cu-form-group"},[n("v-uni-view",{staticClass:"title"},[e._v("手机号码")]),n("v-uni-input",{attrs:{placeholder:"请输入",name:"input",type:"text"},model:{value:e.mobile,callback:function(t){e.mobile=t},expression:"mobile"}})],1),n("v-uni-view",{staticClass:"cu-form-group"},[n("v-uni-view",{staticClass:"title"},[e._v("短信验证")]),n("v-uni-input",{attrs:{placeholder:"请输入验证码",name:"code"},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}}),n("v-uni-button",{staticClass:"cu-btn bg-green shadow",attrs:{disabled:e.sendBtnDisabled},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.sendSms.apply(void 0,arguments)}}},[e._v(e._s(0==e.sendSec?"发送验证码":e.sendSec+"秒后重发"))])],1),n("v-uni-view",{staticClass:"padding flex flex-direction",staticStyle:{position:"fixed",bottom:"100upx",width:"100%"}},[n("v-uni-button",{staticClass:"cu-btn bg-green margin-tb-sm lg shadow",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.handleLogin.apply(void 0,arguments)}}},[e._v("立即绑定")])],1)],1)],1)},a=[]},"9d3b":function(e,t,n){"use strict";n.r(t);var s=n("82e6"),i=n("829f");for(var a in i)"default"!==a&&function(e){n.d(t,e,(function(){return i[e]}))}(a);var c,o=n("f0c5"),l=Object(o["a"])(i["default"],s["b"],s["c"],!1,null,"0f182afd",null,!1,s["a"],c);t["default"]=l.exports}}]);