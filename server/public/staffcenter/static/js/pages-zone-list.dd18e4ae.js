(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-zone-list"],{"2b73":function(t,e,a){"use strict";a.r(e);var i=a("5bac"),n=a("965f");for(var s in n)"default"!==s&&function(t){a.d(e,t,(function(){return n[t]}))}(s);var r,o=a("f0c5"),u=Object(o["a"])(n["default"],i["b"],i["c"],!1,null,"6f91af78",null,!1,i["a"],r);e["default"]=u.exports},"41ab":function(t,e,a){"use strict";a("a15b"),a("d81d"),a("b680"),a("d3b7"),a("acd8"),a("e25e"),a("ac1f"),a("25f0"),a("5319"),a("841c"),a("1276");var i=a("a159");function n(t){if("number"!==typeof t||t<0)return t;var e=parseInt(t/3600);t%=3600;var a=parseInt(t/60);t%=60;var i=t;return[e,a,i].map((function(t){return t=t.toString(),t[1]?t:"0"+t})).join(":")}function s(t,e){return"string"===typeof t&&"string"===typeof e&&(t=parseFloat(t),e=parseFloat(e)),t=t.toFixed(2),e=e.toFixed(2),{longitude:t.toString().split("."),latitude:e.toString().split(".")}}var r={UNITS:{"年":315576e5,"月":26298e5,"天":864e5,"小时":36e5,"分钟":6e4,"秒":1e3},humanize:function(t){var e="";for(var a in this.UNITS)if(t>=this.UNITS[a]){e=Math.floor(t/this.UNITS[a])+a+"前";break}return e||"刚刚"},format:function(t){var e=this.parse(t),a=Date.now()-e.getTime();if(a<this.UNITS["天"])return this.humanize(a);var i=function(t){return t<10?"0"+t:t};return e.getFullYear()+"/"+i(e.getMonth()+1)+"/"+i(e.getDate())+"-"+i(e.getHours())+":"+i(e.getMinutes())},parse:function(t){var e=t.split(/[^0-9]/);return new Date(e[0],e[1]-1,e[2],e[3],e[4],e[5])}};function o(t){return t&&-1==t.search("http")?(i.baseUrl+t).replace("\\","/"):t}t.exports={formatTime:n,formatLocation:s,dateUtils:r,fixImgUrl:o}},"5bac":function(t,e,a){"use strict";var i;a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return s})),a.d(e,"a",(function(){return i}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"content"},[t._l(t.list,(function(e,i){return a("v-uni-view",{key:i,staticClass:"cu-card dynamic no-card margin-bottom-sm"},[a("v-uni-view",{staticClass:"cu-item shadow"},[a("v-uni-view",{staticClass:"cu-list menu-avatar"},[a("v-uni-view",{staticClass:"cu-item"},[a("v-uni-view",{staticClass:"cu-avatar round",style:{"background-image":"url("+e.student_avatar+")"}}),a("v-uni-view",{staticClass:"content flex-sub flex justify-between"},[a("v-uni-view",[t._v(t._s(e.student_name))]),a("v-uni-view",{staticClass:"text-gray text-xs "},[t._v(t._s(e.add_time))])],1)],1)],1),e.content?a("v-uni-view",{staticClass:"text-content margin-top-sm"},[t._v(t._s(e.content))]):t._e(),1!=e.type?a("v-uni-view",{staticClass:"grid flex-sub padding-lr col-3 grid-square"},[t._l(e.attach,(function(i,n){return 3==e.type?a("v-uni-view",{key:n,staticClass:"bg-img",style:{backgroundImage:"url("+t.fixImgUrlFunc(i)+")"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.previewImg(e.attach,n)}}}):t._e()})),2==e.type?a("v-uni-view",{staticClass:"bg-gray",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.playAudio(e)}}},[e.playing?a("v-uni-text",{staticClass:"cuIcon-stop margin-lr-xs"}):a("v-uni-text",{staticClass:"cuIcon-playfill margin-lr-xs"})],1):t._e()],2):t._e(),a("v-uni-view",{staticClass:"text-gray text-right padding"},[a("v-uni-view",{staticClass:"inline-block"},[a("v-uni-text",{staticClass:"cuIcon-appreciatefill margin-lr-xs"}),t._v(t._s(e.likes_count))],1),a("v-uni-view",{staticClass:"inline-block margin-left"},[a("v-uni-text",{staticClass:"cuIcon-messagefill margin-lr-xs"}),t._v(t._s(e.comments.length))],1)],1),e.verify_content?a("v-uni-view",{staticClass:"cu-list menu-avatar comment solids-top"},[a("v-uni-view",{staticClass:"cu-item"},[a("v-uni-view",{staticClass:"cu-avatar round",style:{"background-image":"url("+t.fixImgUrlFunc(e.verifier_photo)+")"}}),a("v-uni-view",{staticClass:"content"},[a("v-uni-view",{staticClass:"text-grey flex justify-between "},[a("v-uni-view",{staticClass:"text-sm"},[t._v(t._s(e.verifier_name)+" 点评:")]),a("v-uni-view",{staticClass:"text-xs "},[t._v(t._s(e.add_time))])],1),a("v-uni-view",{staticClass:"radius margin-top-sm"},[a("v-uni-view",{staticClass:"flex"},[a("v-uni-view",{staticClass:"flex-sub"},[t._v(t._s(e.verify_content))]),a("v-uni-view",{staticClass:"margin-left text-lg text-orange"},[t._v(t._s(e.verify_score)+"分")])],1)],1)],1)],1)],1):a("v-uni-view",{staticClass:"padding-sm text-center"},[a("v-uni-button",{staticClass:"cu-btn bg-orange round",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.handleVerify(e.id)}}},[t._v("点 评")])],1),a("v-uni-view",{staticClass:"padding-lr padding-bottom-sm "},t._l(e.comments,(function(e,i){return a("v-uni-view",{key:i,staticClass:"bg-gray padding-xs radius margin-top-sm"},[a("v-uni-text",{staticClass:"text-sm"},[t._v(t._s(e.publisher?e.publisher.name:"评论人")+"："+t._s(e.content))])],1)})),1)],1)],1)})),0==t.list.length?a("v-uni-view",{staticClass:"text-center padding text-gray"},[t._v("暂无记录")]):t._e()],2)},s=[]},"965f":function(t,e,a){"use strict";a.r(e);var i=a("cb07"),n=a.n(i);for(var s in i)"default"!==s&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},aed1:function(t,e,a){"use strict";var i=a("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(a("b215")),s={data:function(){return{pageData:{page:1,lastPage:1}}},onReachBottom:function(){this.handleReachBottom()},methods:{foo:function(){console.log("foo")},handleReachBottom:function(){this.pageData.lastPage!=this.pageData.page&&(this.pageData.lastPage>this.pageData.page?(this.pageData.page++,this.handleReq()):n.default.showError("没有更多数据"))}}};e.default=s},cb07:function(t,e,a){"use strict";var i=a("dbce"),n=a("4ea4");a("99af"),a("e25e"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(a("b85c")),r=a("41ab"),o=i(a("b215")),u=i(a("69ec")),c=n(a("aed1")),l={mixins:[c.default],components:{},data:function(){return{list:[],taskId:"",audioContext:null}},onLoad:function(t){this.taskId=t.task_id},onShow:function(){this.handleReq()},onBackPress:function(){uni.redirectTo({url:"/pages/zone/tasks?task_id="+this.taskId})},methods:{handleReq:function(){var t=this;u.get("staff/zoneList",{task_id:this.taskId},(function(e){"success"==e.result?(t.list=t.list.concat(e.data.data),t.pageData.page=parseInt(e.data.current_page),t.pageData.lastPage=parseInt(e.data.last_page)):o.showError(e.msg)}))},handleVerify:function(t){uni.navigateTo({url:"/pages/zone/check?id="+t+"&task_id="+this.taskId,animationDuration:200})},fixImgUrlFunc:function(t){return(0,r.fixImgUrl)(t)},playAudio:function(t){var e,a=t.playing,i=(0,s.default)(this.list);try{for(i.s();!(e=i.n()).done;){var n=e.value;2==n.type&&this.$set(n,"playing",!1)}}catch(r){i.e(r)}finally{i.f()}if(1==a)return this.$set(t,"playing",!1),void this.audioContext.stop();this.$set(t,"playing",!0),this.audioContext&&this.audioContext.stop(),this.audioContext=uni.createInnerAudioContext(),this.audioContext.src=t.attach,this.audioContext.autoplay=!0,this.audioContext.onPlay((function(){console.log("开始播放")})),this.audioContext.onError((function(t){console.log(t.errMsg),console.log(t.errCode)}))},previewImg:function(t,e){var a,i=[],n=(0,s.default)(t);try{for(n.s();!(a=n.n()).done;){var r=a.value;i.push(this.fixImgUrlFunc(r))}}catch(o){n.e(o)}finally{n.f()}uni.previewImage({urls:i,current:i[e],longPressActions:{itemList:["发送给朋友","保存图片","收藏"],success:function(t){console.log("选中了第"+(t.tapIndex+1)+"个按钮,第"+(t.index+1)+"张图片")},fail:function(t){console.log(t.errMsg)}}})}}};e.default=l}}]);