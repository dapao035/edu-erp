(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d2fae"],{"5b8c":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("cui-search",{attrs:{config:e.searchConfig},on:{handleRequest:e.handleRequest}}),i("cui-table",{ref:"tableBuilder",attrs:{config:e.tableConfig,selectedRows:e.selectedRows},on:{"update:selectedRows":function(t){e.selectedRows=t},"update:selected-rows":function(t){e.selectedRows=t}}}),i("cui-dialog-form",{ref:"cuiDialogForm",attrs:{width:"900px",title:e.formTitle,formConfig:e.formConfig,visible:e.formVisible},on:{"update:visible":function(t){e.formVisible=t},onSubmit:e.onSubmit}}),i("cui-dialog",{attrs:{title:"作业提交列表",visible:e.recordsVisible,width:"900px",showSubmitBtn:!1},on:{"update:visible":function(t){e.recordsVisible=t}}},[i("cui-table",{ref:"tableBuilder2",attrs:{config:e.tableConfig2}})],1),i("cui-dialog-form",{ref:"cuiDialogForm2",attrs:{title:"作业点评",formConfig:e.formConfig2,visible:e.formVisible2},on:{"update:visible":function(t){e.formVisible2=t},onSubmit:e.onSubmit2}}),i("cui-dialog",{attrs:{title:"作业提交内容",visible:e.contentVisible,width:"800px",showSubmitBtn:!1},on:{"update:visible":function(t){e.contentVisible=t}}},[i("p",{domProps:{innerHTML:e._s(e.content)}})])],1)},o=[],r=i("1da1"),a=(i("96cf"),i("d282")),s=i("b775");function c(e){return l.apply(this,arguments)}function l(){return l=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(s["a"])({url:"/common/homework/save",method:"post",data:t}));case 1:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function u(e){return m.apply(this,arguments)}function m(){return m=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(s["a"])({url:"/common/homework/delete",method:"post",data:t}));case 1:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}function d(e){return f.apply(this,arguments)}function f(){return f=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(s["a"])({url:"/common/homework/recordComment",method:"post",data:t}));case 1:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}var h=i("2934"),b=i("ed08"),p={name:"Homework",components:{},props:{},data:function(){var e=this,t=this.$createElement;return{formTitle:"",tableConfig:{url:a["a"].homeworkList,selectable:!0,condition:{},fields:[{title:"作业标题",name:"title"},{title:"班级",name:"className",width:120},{title:"提交数",width:"80px",content:function(i){return t("span",{class:"text-link",on:{click:function(){return e.loadRecords(i.id)}}},[i.completeCount])}},{title:"发布人",name:"teacherName",width:80},{title:"发布时间",name:"addTime",width:120}],actions:[{title:"编辑",click:function(t){e.formVisible=!0,e.formTitle="修改作业内容",e.$refs.cuiDialogForm.initFormData(t)}}],topActions:[{title:"布置",icon:"el-icon-plus",type:"primary",click:function(){e.formVisible=!0,e.formTitle="布置作业内容",e.$refs.cuiDialogForm.onReset()}},{title:"删除",icon:"el-icon-delete",click:function(){Object(h["d"])(u,e.selectedRows,(function(){return e.handleRequest()}))}}]},selectedRows:[],searchConfig:{fields:[{label:"搜索标题",name:"title",type:"input"},{label:"班级",name:"classId",type:"selectBox",code:"class",limit:1},{label:"发布者",name:"teacherId",type:"selectBox",code:"teacher",limit:1}]},formConfig:{fields:[{label:"选择班级",name:"classId",type:"selectBox",code:"class",limit:1},{label:"作业标题",name:"title",type:"input"},{label:"作业内容",name:"content",type:"editor"}],rules:{classId:[{required:!0,message:"请选择班级"}],title:[{required:!0,message:"请输入作业标题"}],content:[{required:!0,message:"请输入作业内容"}]}},formVisible:!1,recordsVisible:!1,tableConfig2:{url:a["a"].homeworkRecordsList,indexed:!0,autoload:!1,condition:{homeworkId:""},fields:[{title:"提交人",name:"studentName",width:80},{title:"提交内容",content:function(i){return t("span",{class:"text-link",on:{click:function(){return e.showContent(i.content)}}},["查看"])}},{title:"提交时间",name:"addTime",width:120},{title:"点评人",name:"commentTeacherName",width:80},{title:"点评得分",width:150,content:function(i){return t("el-rate",{attrs:{disabled:!0},model:{value:i.score,callback:function(t){e.$set(i,"score",t)}}})}},{title:"点评内容",name:"comment"}],actions:[{title:"点评",click:function(t){e.formVisible2=!0,e.commentForm.id=t.id,e.$refs.cuiDialogForm2.initFormData(t)}}]},formConfig2:{fields:[{label:"点评得分",name:"score",type:"rate"},{label:"点评内容",name:"comment",type:"textarea"}],rules:{classId:[{required:!0,message:"请选择班级"}],title:[{required:!0,message:"请输入作业标题"}],content:[{required:!0,message:"请输入作业内容"}]}},formVisible2:!1,commentForm:{id:"",homeworkId:"",comment:"",score:0},content:"",contentVisible:!1}},methods:{handleRequest:function(e){e&&Object.assign(this.tableConfig.condition,e),this.$refs.tableBuilder.loadData()},onSubmit:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c(t);case 2:i=e.sent,Object(b["a"])(i)&&(this.$refs.cuiDialogForm.onReset(),this.$refs.tableBuilder.loadData());case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),loadRecords:function(e){var t=this;this.recordsVisible=!0,this.tableConfig2.condition={homeworkId:e},this.commentForm.homeworkId=e,this.$nextTick((function(){t.$refs.tableBuilder2.loadData()}))},onSubmit2:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i={id:this.commentForm.id,homeworkId:this.commentForm.homeworkId,comment:t.comment,score:t.score},e.next=3,d(i);case 3:n=e.sent,Object(b["a"])(n)&&(this.$refs.cuiDialogForm2.onReset(),this.$refs.tableBuilder2.loadData());case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),showContent:function(e){this.content=e,this.contentVisible=!0}}},w=p,g=i("2877"),k=Object(g["a"])(w,n,o,!1,null,null,null);t["default"]=k.exports}}]);