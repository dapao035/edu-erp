(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b76f5380"],{"1c11":function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("cui-tab",{attrs:{list:[{label:"班级信息",url:"/course/classDetail"},{label:"班级课表",url:"/course/classLesson"}],active:"班级课表"}}),i("cui-search",{attrs:{config:e.searchConfig},on:{handleRequest:e.handleRequest}}),i("cui-table",{ref:"tableBuilder",attrs:{config:e.tableConfig,selectedRows:e.selectedRows},on:{"update:selectedRows":function(t){e.selectedRows=t},"update:selected-rows":function(t){e.selectedRows=t}}}),i("CreateLesson",{ref:"createLesson",attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t},onSubmit:function(t){return e.$refs.tableBuilder.loadData()}}}),i("LessonInfo",{attrs:{visible:e.infoDialog,id:e.lessonId},on:{"update:visible":function(t){e.infoDialog=t}}}),i("RollCall",{attrs:{visible:e.rollcallDialog,id:e.lessonId},on:{"update:visible":function(t){e.rollcallDialog=t}}})],1)},a=[],n=i("d282"),o=i("a49b"),l=i("3d80"),r=i("69d7"),c=i("2cdf"),d={name:"LessonSchedule",components:{CreateLesson:l["a"],LessonInfo:r["a"],RollCall:c["a"]},props:{},data:function(){var e=this,t=this.$createElement;return{infoDialog:!1,lessonId:"",dialogVisible:!1,rollcallDialog:!1,tableConfig:{url:n["a"].lessonList,autoLoad:!1,selectable:!0,condition:{classIds:this.$route.query.id+""},fields:[{title:"上课时间",width:170,content:function(i){return t("span",{class:"text-link",on:{click:function(){return e.showInfo(i.id)}}},[i.date,"(",i.week,") ",i.startTime,"~",i.endTime])}},{title:"课程",name:"title"},{title:"班级名称",name:"className"},{title:"上课老师",name:"teacherNames",width:100},{title:"助教",name:"assistantNames",width:100},{title:"教室",name:"classroom",width:80},{title:"学生数",name:"studentNum",width:50},{title:"消课数",width:50,name:"decCount"},{title:"状态",width:50,name:"state"}],actionWidth:120,actions:[{title:"编辑",click:function(t){e.dialogVisible=!0,e.$refs.createLesson.initData(t)}},{title:"点名管理",click:function(t){e.lessonId=t.id,e.rollcallDialog=!0}}],topActions:[{title:"删除课次",icon:"el-icon-delete",click:function(){o["a"].deleteLesson(e.selectedRows,(function(){return e.handleRequest()}))}},{title:"停课",icon:"el-icon-circle-close",click:function(){o["a"].stopLesson(e.selectedRows,(function(){return e.handleRequest()}))}},{title:"恢复上课",icon:"el-icon-refresh",click:function(){o["a"].reopenLesson(e.selectedRows,(function(){return e.handleRequest()}))}}],rowClassName:function(e){var t=e.row;return"已结课"==t.state?"success-row":"已停课"==t.state?"warning-row":""}},selectedRows:[],searchConfig:{fields:[{label:"开始日期",name:"startDate",type:"date"},{label:"结束日期",name:"endDate",type:"date"}]}}},mounted:function(){this.$refs.tableBuilder.loadData()},methods:{showInfo:function(e){this.lessonId=e,this.infoDialog=!0},handleRequest:function(e){e&&Object.assign(this.tableConfig.condition,e),this.$refs.tableBuilder.loadData()}}},u=d,f=i("2877"),m=Object(f["a"])(u,s,a,!1,null,null,null);t["default"]=m.exports},"3d80":function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("cui-dialog",{attrs:{title:e.formData.id?"修改课次":"添加课次",visible:e.dialogVisible,width:"700px"},on:{"update:visible":function(t){e.dialogVisible=t},submit:e.formSubmit}},[i("cui-form",{ref:"formRef",attrs:{config:e.formConfig},on:{update:e.formUpdate}})],1)},a=[],n=i("1da1"),o=(i("96cf"),i("ac1f"),i("1276"),i("cf45")),l=i("8897"),r=i("ed08"),c={id:"",title:"",classId:"",teacherIds:"",assistantIds:"",date:"",startTime:"",endTime:"",roomId:"",decCount:1,bookable:!1},d={name:"CreateLesson",components:{},props:{visible:{type:Boolean,required:!0}},data:function(){return{lessonSetting:[],formConfig:{fields:[{label:"本课主题",name:"title",type:"input"},{label:"选择班级",name:"classId",type:"selectBox",code:"class",limit:1,condition:{over:!0}},{label:"上课老师",name:"teacherIds",type:"selectBox",code:"teacher",info:"支持多个老师，第一位为主讲人"},{label:"助教老师",name:"assistantIds",type:"selectBox",code:"teacher"},{label:"上课日期",name:"date",type:"date"},{label:"开始时间",name:"startTime",type:"time"},{label:"结束时间",name:"endTime",type:"time",minTime:"startTime"},{label:"选择教室",name:"roomId",type:"selectBox",code:"classroom",limit:1},{label:"消课次数",name:"decCount",type:"number"},{label:"是否开放预约",name:"bookable",type:"switch"}],rules:{classId:[{required:!0,message:"请选择班级",trigger:"change"}],teacherIds:[{required:!0,message:"请选择上课老师",trigger:"change"}],date:[{required:!0,message:"请设置上课日期"}],startTime:[{required:!0,message:"请选择开始日期"}],endTime:[{required:!0,message:"请选择结束日期"}]},labelWidth:"120px"},formData:Object.assign({},c)}},computed:{dialogVisible:{get:function(){return!!this.visible},set:function(e){this.$emit("update:visible",e)}}},created:function(){},methods:{formUpdate:function(e){this.formData=e},formSubmit:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$refs.formRef.onValidate();case 2:if(t=e.sent,!0===t){e.next=5;break}return e.abrupt("return");case 5:return i=Object.assign({},this.formData),i.teacherIds=this.formData.teacherIds?this.formData.teacherIds.split(","):[],i.assistantIds=this.formData.assistantIds?this.formData.assistantIds.split(","):[],e.next=10,Object(l["m"])(i);case 10:s=e.sent,Object(r["a"])(s)&&(this.$emit("update:visible",!1),this.$emit("onSubmit"),this.initData(),Object(o["e"])(s.msg,"success"));case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),initData:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:"undefined"==typeof t&&(t=c),setTimeout((function(){i.$refs.formRef.setInitData(t)}),50);case 2:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}},u=d,f=i("2877"),m=Object(f["a"])(u,s,a,!1,null,null,null);t["a"]=m.exports}}]);