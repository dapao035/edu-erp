(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21ef57"],{d87d:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("cui-search",{attrs:{config:e.searchConfig},on:{handleRequest:e.handleRequest}}),n("cui-table",{ref:"tableBuilder",attrs:{config:e.tableConfig,selectedRows:e.selectedRows},on:{"update:selectedRows":function(t){e.selectedRows=t},"update:selected-rows":function(t){e.selectedRows=t}}}),n("cui-dialog-form",{ref:"cuiDialogForm",attrs:{title:e.formTitle,formConfig:e.formConfig,visible:e.formVisible},on:{"update:visible":function(t){e.formVisible=t},onSubmit:e.onSubmit}}),n("cui-dialog-form",{ref:"cuiDialogForm1",attrs:{title:"物料入库",formConfig:e.formConfig1,visible:e.formVisible1},on:{"update:visible":function(t){e.formVisible1=t},onSubmit:e.onSubmit1}}),n("cui-dialog-form",{ref:"cuiDialogForm2",attrs:{title:"物料出库",formConfig:e.formConfig2,visible:e.formVisible2},on:{"update:visible":function(t){e.formVisible2=t},onSubmit:e.onSubmit2}})],1)},i=[],a=n("1da1"),o=n("ade3"),c=n("5530"),s=(n("96cf"),n("d282")),u=n("ed08"),l=n("cf45"),m=n("2934"),f=n("b775");function d(e){return p.apply(this,arguments)}function p(){return p=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(f["a"])({url:"/common/material/save",method:"post",data:t}));case 1:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}function b(e){return h.apply(this,arguments)}function h(){return h=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(f["a"])({url:"/common/material/open",method:"post",data:t}));case 1:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}function g(e){return w.apply(this,arguments)}function w(){return w=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(f["a"])({url:"/common/material/close",method:"post",data:t}));case 1:case"end":return e.stop()}}),e)}))),w.apply(this,arguments)}function O(e){return v.apply(this,arguments)}function v(){return v=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(f["a"])({url:"/common/material/delete",method:"post",data:t}));case 1:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}function R(e){return j.apply(this,arguments)}function j(){return j=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(f["a"])({url:"/common/material/handleIn",method:"post",data:t}));case 1:case"end":return e.stop()}}),e)}))),j.apply(this,arguments)}function y(e){return k.apply(this,arguments)}function k(){return k=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(f["a"])({url:"/common/material/handleOut",method:"post",data:t}));case 1:case"end":return e.stop()}}),e)}))),k.apply(this,arguments)}var x={handleOpen:function(e,t){Object(l["a"])(e,"请先选择项目")&&Object(m["c"])("确认启用?",b,e,t)},handleClose:function(e,t){Object(l["a"])(e,"请先选择项目")&&Object(m["c"])("确认禁用?",g,e,t)}},C={components:{},props:{},data:function(){var e,t=this,n=this.$createElement;return e={formTitle:"",tableConfig:{url:s["a"].materialList,selectable:!0,condition:{},fields:[{title:"图片",content:function(e){return e.cover?n("el-image",{style:{width:"60px"},attrs:{src:e.cover}}):""},width:80},{title:"物料名称",name:"name"},{title:"分类",name:"categoryName"},{title:"所属学校",name:"schoolName"},{title:"库存",name:"storage"},{title:"最后编辑时间",name:"editTime"},{title:"状态",name:"state"}],actionWidth:"160px",actions:[{title:"编辑",click:function(e){t.formVisible=!0,t.formTitle="修改物料";var n=Object(c["a"])({},e);n.cover=[n.cover],t.$refs.cuiDialogForm.initFormData(n)}},{title:"入库",click:function(e){t.itemId=e.id,t.formVisible1=!0}},{title:"出库",click:function(e){t.itemId=e.id,t.formVisible2=!0}}],topActions:[{title:"新增",icon:"el-icon-plus",type:"primary",click:function(){t.formVisible=!0,t.formTitle="新增物料",t.$refs.cuiDialogForm.onReset()}},{title:"删除",icon:"el-icon-delete",click:function(){Object(m["d"])(O,t.selectedRows,(function(){return t.handleRequest()}))}},{title:"启用",icon:"el-icon-check",click:function(){x.handleOpen(t.selectedRows,(function(){return t.handleRequest()}))}},{title:"禁用",icon:"el-icon-close",click:function(){x.handleClose(t.selectedRows,(function(){return t.handleRequest()}))}}],rowClassName:function(e){var t=e.row;return"禁用"==t.state?"gray-row":""}},selectedRows:[],searchConfig:{fields:[{label:"物料名称",name:"name",type:"input"},{label:"状态",name:"stateText",type:"enum",code:"SwitchEnum"}]}},Object(o["a"])(e,"formTitle",""),Object(o["a"])(e,"formConfig",{fields:[{label:"物料名称",name:"name",type:"input"},{label:"所属学校",name:"schoolId",type:"select",code:"school"},{label:"所属分类",name:"categoryId",type:"dict",code:"material_category"},{label:"物料图片",name:"cover",type:"img",limit:1},{label:"物料说明",name:"content",type:"textarea"}],rules:{name:[{required:!0,message:"请输入名称"}],schoolId:[{required:!0,message:"请选择所属学校"}],categoryId:[{required:!0,message:"请选择所属分类"}]}}),Object(o["a"])(e,"formVisible",!1),Object(o["a"])(e,"itemId",""),Object(o["a"])(e,"formConfig1",{fields:[{label:"入库数量",name:"storage",type:"number"},{label:"入库说明",name:"reason",type:"textarea"}],rules:{storage:[{required:!0,message:"请输入入库数量"}],reason:[{required:!0,message:"请输入入库说明"}]}}),Object(o["a"])(e,"formVisible1",!1),Object(o["a"])(e,"formConfig2",{fields:[{label:"出库数量",name:"storage",type:"number"},{label:"原因说明",name:"reason",type:"textarea"}],rules:{storage:[{required:!0,message:"请输入出库数量"}],reason:[{required:!0,message:"请输入原因说明"}]}}),Object(o["a"])(e,"formVisible2",!1),e},methods:{handleRequest:function(e){e&&Object.assign(this.tableConfig.condition,e),this.$refs.tableBuilder.loadData()},onSubmit:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=Object(c["a"])({},t),n.cover=t.cover.length>0?t.cover[0]:"",e.next=4,d(n);case 4:r=e.sent,Object(u["a"])(r)&&(this.$refs.cuiDialogForm.onReset(),this.$refs.tableBuilder.loadData());case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),onSubmit1:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.id=this.itemId,e.next=3,R(t);case 3:n=e.sent,Object(u["a"])(n)&&(this.$refs.cuiDialogForm1.onReset(),this.$refs.tableBuilder.loadData());case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),onSubmit2:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.id=this.itemId,e.next=3,y(t);case 3:n=e.sent,Object(u["a"])(n)&&(this.$refs.cuiDialogForm2.onReset(),this.$refs.tableBuilder.loadData());case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}},q=C,D=n("2877"),V=Object(D["a"])(q,r,i,!1,null,"45f1d146",null);t["default"]=V.exports}}]);