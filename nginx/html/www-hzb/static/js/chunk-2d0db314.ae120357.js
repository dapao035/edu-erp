(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0db314"],{"6f8f":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("cui-search",{attrs:{config:e.searchConfig},on:{handleRequest:e.handleRequest}}),i("cui-table",{ref:"tableBuilder",attrs:{config:e.tableConfig,selectedRows:e.selectedRows},on:{"update:selectedRows":function(t){e.selectedRows=t},"update:selected-rows":function(t){e.selectedRows=t}}}),i("cui-dialog-form",{ref:"cuiDialogForm",attrs:{width:"900px",title:e.formTitle,formConfig:e.formConfig,visible:e.formVisible},on:{"update:visible":function(t){e.formVisible=t},onSubmit:e.onSubmit}}),i("cui-dialog",{attrs:{title:"体验卡领取列表",visible:e.recordsVisible,width:"900px",showSubmitBtn:!1},on:{"update:visible":function(t){e.recordsVisible=t}}},[i("cui-table",{ref:"tableBuilder2",attrs:{config:e.tableConfig2}})],1)],1)},r=[],a=i("1da1"),o=(i("96cf"),i("d282")),l=i("b775");function s(e){return c.apply(this,arguments)}function c(){return c=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(l["a"])({url:"/common/trial/save",method:"post",data:t}));case 1:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}function u(e){return d.apply(this,arguments)}function d(){return d=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(l["a"])({url:"/common/trial/delete",method:"post",data:t}));case 1:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}var m=i("2934"),f=i("ed08"),b={components:{},props:{},data:function(){var e=this,t=this.$createElement;return{formTitle:"",tableConfig:{url:o["a"].trialList,selectable:!0,condition:{},fields:[{title:"体验卡名称",name:"title"},{title:"所属课程",name:"courseName"},{title:"包含课时数",name:"lessonCount"},{title:"发行数量",name:"quantity"},{title:"已领取数量",name:"recordCount"},{title:"领取后有效天数",name:"expireDays"},{title:"发行结束日期",name:"endDate"},{title:"是否启用",content:function(e){return t("span",[e.state?"正常":"已禁用"])},width:70}],actions:[{title:"编辑",click:function(t){e.formVisible=!0,e.formTitle="修改体验卡信息",e.$refs.cuiDialogForm.initFormData(t)}},{title:"领取记录",click:function(t){e.loadRecords(t.id)}}],actionWidth:120,topActions:[{title:"添加体验卡",icon:"el-icon-plus",type:"primary",click:function(){e.formVisible=!0,e.formTitle="体验卡信息",e.$refs.cuiDialogForm.onReset()}},{title:"删除",icon:"el-icon-delete",click:function(){Object(m["d"])(u,e.selectedRows,(function(){return e.handleRequest()}))}}]},selectedRows:[],searchConfig:{fields:[{label:"搜索标题",name:"title",type:"input"},{label:"搜索课程",name:"courseId",type:"selectBox",code:"course",limit:1}]},formConfig:{fields:[{label:"体验卡名称",name:"title",type:"input"},{label:"选择课程",name:"courseId",type:"selectBox",code:"course",limit:1},{label:"发行数量",name:"quantity",type:"number"},{label:"包含课时数",name:"lessonCount",type:"number"},{label:"有效天数",name:"expireDays",type:"number"},{label:"发行结束日期",name:"endDate",type:"date"},{label:"是否启用",name:"state",type:"switch"}],rules:{courseId:[{required:!0,message:"请选择课程"}],title:[{required:!0,message:"请输入作业标题"}],quantity:[{required:!0,message:"请输入发行数量"}],lessonCount:[{required:!0,message:"请输入包含课时数"}],expireDays:[{required:!0,message:"请输入有效天数"}],endDate:[{required:!0,message:"请输入发行结束日期"}]}},formVisible:!1,recordsVisible:!1,tableConfig2:{url:o["a"].trialRecordList,indexed:!0,autoload:!1,condition:{trialId:""},fields:[{title:"体验卡名称",name:"trialTitle"},{title:"领取人",name:"studentName"},{title:"电话",name:"mobile"},{title:"领取时间",name:"addTime"}]}}},methods:{handleRequest:function(e){e&&Object.assign(this.tableConfig.condition,e),this.$refs.tableBuilder.loadData()},onSubmit:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s(t);case 2:i=e.sent,Object(f["a"])(i)&&(this.$refs.cuiDialogForm.onReset(),this.$refs.tableBuilder.loadData());case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),loadRecords:function(e){var t=this;this.recordsVisible=!0,this.tableConfig2.condition={trialId:e},this.$nextTick((function(){t.$refs.tableBuilder2.loadData()}))}}},p=b,h=i("2877"),g=Object(h["a"])(p,n,r,!1,null,null,null);t["default"]=g.exports}}]);