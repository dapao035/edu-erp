(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2bef0c3e"],{3158:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("cui-search",{attrs:{config:e.searchConfig},on:{handleRequest:e.handleRequest}}),n("cui-table",{ref:"tableBuilder",attrs:{config:e.tableConfig,selectedRows:e.selectedRows},on:{"update:selectedRows":function(t){e.selectedRows=t},"update:selected-rows":function(t){e.selectedRows=t}}}),n("cui-dialog-form",{ref:"cuiDialogForm",attrs:{title:"意向学员",formConfig:e.formConfig,visible:e.formVisible},on:{"update:visible":function(t){e.formVisible=t},onSubmit:e.onSubmit}}),n("create-student-course",{attrs:{studentId:e.studentInfo.id,studentName:e.studentInfo.name,visible:e.creatContracVisible},on:{"update:visible":function(t){e.creatContracVisible=t}}}),n("cui-excel",{attrs:{visible:e.excelVisible,templateUrl:"/common/student/export",importUrl:"/common/student/import",params:e.uploadParam},on:{"update:visible":function(t){e.excelVisible=t},onSuccess:e.onSuccess}})],1)},a=[],c=n("1da1"),o=n("ade3"),r=(n("96cf"),n("b0c0"),n("d282")),s=n("2eb3"),l=n("9850c"),u=n("49e5"),d=(n("61f7"),n("ed08")),f=n("f87d"),m={name:"StudentIntention",components:{CreateStudentCourse:s["a"]},data:function(){var e=this,t=this.$createElement;return{courseRecord:[],tableConfig:{url:r["a"].studentList,selectable:!0,fields:[{title:"编号",name:"id",width:"80px"},{title:"学员姓名",width:"80px",content:function(n){return t("span",{class:"text-link",on:{click:function(){return e.$router.push("/student/profile?id="+n.id)}}},[n.name])}},{title:"家长姓名",name:"parentName",width:"70px"},{title:"亲属关系",name:"familyRel",width:"70px"},{title:"联系电话",name:"mobile",width:"90px"},{title:"顾问",name:"counselorName",width:"80px"},{title:"分校",name:"schoolName",width:"120px"},{title:"课次数",width:60,content:function(n){return t("el-popover",{attrs:Object(o["a"])({placement:"bottom",title:n.name+" 的课次余量",width:"360",trigger:"hover"},"placement","top"),on:{show:function(){return e.getStudentCourse(n.id)}}},[t("el-table",{attrs:{data:e.courseRecord[n.id]}},[t("el-table-column",{attrs:{width:"",property:"courseName",label:"课程名"}}),t("el-table-column",{attrs:{width:"60",property:"countLessonTotal",label:"总课次"}}),t("el-table-column",{attrs:{width:"80",property:"countLessonRemaining",label:"剩余课次"}})]),t("span",{class:"text-link",slot:"reference"},[n.countLessonRemaining," ",t("i",{class:"el-icon-more text-link"})])])}},{title:"性别",name:"gender",width:"50px"},{title:"年龄",name:"age",width:"50px"},{title:"来源",name:"joinWayName",width:"70px"},{title:"最新跟进日期",name:"contactTime",width:"110px"},{title:"下次跟进",name:"contactNextTime",width:"80px"},{title:"备注",name:"remark"}],actions:[{title:"查看",click:function(t){e.$router.push("/student/profile?id="+t.id)}},{title:"报名",click:function(t){e.handleContrac(t.id,t.name)}}],topActions:[{title:"添加线索",type:"primary",icon:"el-icon-plus",click:function(){e.handleAdd()}},{title:"转为在学学员",icon:"el-icon-check",click:function(){l["a"].changeLearning(e.selectedRows,(function(){return e.handleRequest()}))}},{title:"删除",icon:"el-icon-delete",click:function(){l["a"].handleDelete(e.selectedRows,(function(){return e.handleRequest()}))}},{title:"导入意向学员",icon:"el-icon-upload2",click:function(t){e.uploadParam={stage:1},e.excelVisible=!0}}],condition:{stage:1}},selectedRows:[],searchConfig:{fields:[{label:"学员姓名",name:"keyword",type:"input",placeholder:"姓名或电话"},{label:"选择年级",name:"grade",type:"year",placeholder:"年级"}]},formConfig:f["a"],formVisible:!1,studentInfo:{id:"",name:""},creatContracVisible:!1,excelVisible:!1,uploadParam:{}}},created:function(){},methods:{getStudentCourse:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.courseRecord[t]){e.next=5;break}return e.next=3,Object(u["x"])({studentId:t});case 3:n=e.sent,this.$set(this.courseRecord,t,n);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleEdit:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(u["q"])(t);case 2:n=e.sent,this.$refs.cuiDialogForm.initFormData(n),this.formVisible=!0;case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleAdd:function(){this.formVisible=!0,this.$refs.cuiDialogForm.onReset()},handleContrac:function(e,t){this.studentInfo.id=e,this.studentInfo.name=t,this.creatContracVisible=!0},handleRequest:function(e){e&&Object.assign(this.tableConfig.condition,e),this.$refs.tableBuilder.loadData()},onSuccess:function(){this.$refs.tableBuilder.loadData()},onSubmit:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.stage="意向学员",e.next=3,Object(u["v"])(t);case 3:n=e.sent,Object(d["a"])(n)&&(this.$refs.cuiDialogForm.onReset(),this.$refs.tableBuilder.loadData());case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}},p=m,h=n("2877"),b=Object(h["a"])(p,i,a,!1,null,null,null);t["default"]=b.exports},"9850c":function(e,t,n){"use strict";var i=n("1da1"),a=(n("96cf"),n("cf45")),c=n("2934"),o=n("49e5"),r=n("ed08");t["a"]={changeLearning:function(e,t){Object(a["a"])(e,"请先选择学员")&&Object(c["c"])("确认变为在学学员?",o["k"],e,t)},changeIntention:function(e,t){Object(a["a"])(e,"请先选择学员")&&Object(c["c"])("确认变为意向学员?",o["j"],e,t)},changeGraduation:function(e,t){Object(a["a"])(e,"请先选择学员")&&Object(c["c"])("确认变为结业学员?",o["i"],e,t)},handleDelete:function(e,t){Object(a["a"])(e,"请先选择学员")&&Object(c["c"])("确认删除?",o["n"],e,t)},studentLeaveCancel:function(e,t){Object(a["a"])(e,"请先选择")&&Object(c["c"])("确认撤销请假?",o["y"],e,t)},payOverdue:function(e,t){Object(a["b"])("确认提交？",Object(i["a"])(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(o["s"])(e);case 2:i=n.sent,Object(r["a"])(i)&&t(i);case 4:case"end":return n.stop()}}),n)}))))},deleteStudentCourse:function(e,t){Object(a["a"])(e,"请先选择合约")&&Object(c["c"])("确认删除合约?",o["o"],e,t)}}}}]);