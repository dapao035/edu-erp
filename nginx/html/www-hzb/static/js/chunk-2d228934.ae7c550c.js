(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d228934"],{da89:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("cui-search",{attrs:{config:e.searchConfig},on:{handleRequest:e.handleRequest}}),n("cui-table",{ref:"tableBuilder",attrs:{config:e.tableConfig,selectedRows:e.selectedRows},on:{"update:selectedRows":function(t){e.selectedRows=t},"update:selected-rows":function(t){e.selectedRows=t}}}),n("cui-dialog-form",{ref:"cuiDialogForm",attrs:{title:"意向学员",formConfig:e.formConfig,visible:e.formVisible},on:{"update:visible":function(t){e.formVisible=t},onSubmit:e.onSubmit}}),n("create-student-course",{attrs:{studentId:e.studentInfo.id,studentName:e.studentInfo.name,visible:e.creatContractVisible},on:{"update:visible":function(t){e.creatContractVisible=t}}}),n("cui-dialog-form",{ref:"cuiDialogForm1",attrs:{title:"跟进记录",formConfig:e.formConfig1,visible:e.formVisible1},on:{"update:visible":function(t){e.formVisible1=t},onSubmit:e.onSubmit1}})],1)},a=[],o=n("1da1"),r=(n("96cf"),n("b0c0"),n("d282")),s=n("2eb3"),c=n("49e5"),l=(n("61f7"),n("ed08")),u=n("f87d"),d={name:"MyCustomer",components:{CreateStudentCourse:s["a"]},data:function(){var e=this,t=this.$createElement;return{tableConfig:{url:r["a"].studentList,indexed:!0,selectable:!0,fields:[{title:"学员姓名",width:80,content:function(n){return t("span",{class:"text-link",on:{click:function(){return e.$router.push("/student/profile?id="+n.id)}}},[n.name])}},{title:"家长(关系)",width:110,content:function(e){return t("span",[e.parentName,"(",e.familyRel,")"])}},{title:"联系电话",name:"mobile",width:100},{title:"学习阶段",name:"stage",width:70},{title:"性别",name:"gender",width:50},{title:"年龄",name:"age",width:50},{title:"来源",name:"joinWayName",width:70},{title:"剩余课次",name:"countLessonRemaining",width:70},{title:"不足",content:function(e){return e.warning?t("i",{class:"el-icon-warning text-warning"}):t("span")},width:50},{title:"添加时间",name:"addTime",width:110},{title:"最新跟进日期",name:"contactTime"},{title:"最新跟进内容",name:"contactInfo"},{title:"下次跟进时间",name:"contactNextTime",width:110},{title:"备注",name:"remark"}],actions:[{title:"报名",click:function(t){e.handleContract(t.id,t.name)}},{title:"跟进",click:function(t){e.handleContact(t.id)}}],topActions:[{title:"添加线索",type:"primary",icon:"el-icon-plus",click:function(){e.handleAdd()}}],condition:{self:!0}},selectedRows:[],searchConfig:{fields:[{label:"学员姓名",name:"keyword",type:"input",placeholder:"姓名或电话"}]},formConfig:u["a"],formVisible:!1,studentInfo:{id:"",name:""},creatContractVisible:!1,formConfig1:{fields:[{label:"进展阶段",name:"stage",type:"enum",code:"ContactStageEnum"},{label:"联系途径",name:"contactType",type:"enum",code:"ContactTypeEnum"},{label:"联系时间",name:"contactTime",type:"datetime"},{label:"下次联系时间",name:"contactNextTime",type:"datetime"},{label:"联系方式",name:"contactPhone",type:"input"},{label:"跟进记录",name:"info",type:"textarea"}],rules:{stage:[{required:!0,message:"请选择进展阶段"}],contactTime:[{required:!0,message:"缺少联系时间"}],info:[{required:!0,message:"缺少跟进记录"}],contactType:[{required:!0,message:"缺少联系途径"}]},labelWidth:"120px"},formVisible1:!1}},created:function(){},methods:{handleEdit:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["q"])(t);case 2:n=e.sent,this.$refs.cuiDialogForm.initFormData(n),this.formVisible=!0;case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleAdd:function(){this.formVisible=!0,this.$refs.cuiDialogForm.onReset()},handleContract:function(e,t){this.studentInfo.id=e,this.studentInfo.name=t,this.creatContractVisible=!0},handleRequest:function(e){e&&Object.assign(this.tableConfig.condition,e),this.$refs.tableBuilder.loadData()},onSubmit:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.stage="意向学员",e.next=3,Object(c["v"])(t);case 3:n=e.sent,Object(l["a"])(n)&&(this.$refs.cuiDialogForm.onReset(),this.$refs.tableBuilder.loadData());case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleContact:function(e){this.studentInfo.id=e,this.formVisible1=!0},onSubmit1:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.id="",t.studentId=this.studentInfo.id,e.next=4,Object(c["t"])(t);case 4:n=e.sent,Object(l["a"])(n)&&(this.$refs.cuiDialogForm1.onReset(),this.handleRequest());case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}},f=d,m=n("2877"),h=Object(m["a"])(f,i,a,!1,null,null,null);t["default"]=h.exports}}]);