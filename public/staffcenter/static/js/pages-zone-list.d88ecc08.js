(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-zone-list"],{"18c4":function(t,e,i){"use strict";i.r(e);var a=i("bd94"),n=i("4da5");for(var s in n)"default"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);var r,o=i("f0c5"),u=Object(o["a"])(n["default"],a["b"],a["c"],!1,null,"2bbf1b04",null,!1,a["a"],r);e["default"]=u.exports},"300b":function(t,e,i){"use strict";var a=i("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("7484")),s={data:function(){return{pageData:{page:1,lastPage:1}}},onReachBottom:function(){this.handleReachBottom()},methods:{foo:function(){console.log("foo")},handleReachBottom:function(){this.pageData.lastPage!=this.pageData.page&&(this.pageData.lastPage>this.pageData.page?(this.pageData.page++,this.handleReq()):n.default.showError("没有更多数据"))}}};e.default=s},"4da5":function(t,e,i){"use strict";i.r(e);var a=i("5c98"),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e["default"]=n.a},"5c98":function(t,e,i){"use strict";var a=i("dbce"),n=i("4ea4");i("99af"),i("e25e"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i("b85c")),r=i("f8ff"),o=a(i("7484")),u=a(i("56ec")),c=n(i("300b")),l={mixins:[c.default],components:{},data:function(){return{list:[],clazzId:"",audioContext:null}},onLoad:function(t){this.clazzId=t.id},onShow:function(){this.handleReq()},methods:{handleReq:function(){var t=this;u.get("staff/zoneList",{clazz_id:this.clazzId},(function(e){"success"==e.result?(t.list=t.list.concat(e.data.data),t.pageData.page=parseInt(e.data.current_page),t.pageData.lastPage=parseInt(e.data.last_page)):o.showError(e.msg)}))},handleVerify:function(t){uni.navigateTo({url:"/pages/zone/check?id="+t+"&clazz_id="+this.clazzId,animationDuration:200})},fixImgUrlFunc:function(t){return(0,r.fixImgUrl)(t)},playAudio:function(t){var e,i=t.playing,a=(0,s.default)(this.list);try{for(a.s();!(e=a.n()).done;){var n=e.value;2==n.type&&this.$set(n,"playing",!1)}}catch(r){a.e(r)}finally{a.f()}if(1==i)return this.$set(t,"playing",!1),void this.audioContext.stop();this.$set(t,"playing",!0),this.audioContext&&this.audioContext.stop(),this.audioContext=uni.createInnerAudioContext(),this.audioContext.src=t.attach,this.audioContext.autoplay=!0,this.audioContext.onPlay((function(){console.log("开始播放")})),this.audioContext.onError((function(t){console.log(t.errMsg),console.log(t.errCode)}))},previewImg:function(t,e){var i,a=[],n=(0,s.default)(t);try{for(n.s();!(i=n.n()).done;){var r=i.value;a.push(this.fixImgUrlFunc(r))}}catch(o){n.e(o)}finally{n.f()}uni.previewImage({urls:a,current:a[e],longPressActions:{itemList:["发送给朋友","保存图片","收藏"],success:function(t){console.log("选中了第"+(t.tapIndex+1)+"个按钮,第"+(t.index+1)+"张图片")},fail:function(t){console.log(t.errMsg)}}})}}};e.default=l},bd94:function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return a}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"content"},[t._l(t.list,(function(e,a){return i("v-uni-view",{key:a,staticClass:"cu-card dynamic no-card margin-bottom-sm"},[i("v-uni-view",{staticClass:"cu-item shadow"},[i("v-uni-view",{staticClass:"cu-list menu-avatar"},[i("v-uni-view",{staticClass:"cu-item"},[i("v-uni-view",{staticClass:"cu-avatar round",style:{"background-image":"url("+e.student_avatar+")"}}),i("v-uni-view",{staticClass:"content flex-sub flex justify-between"},[i("v-uni-view",[t._v(t._s(e.student_name))]),i("v-uni-view",{staticClass:"text-gray text-xs "},[t._v(t._s(e.add_time))])],1)],1)],1),e.content?i("v-uni-view",{staticClass:"text-content margin-top-sm"},[t._v(t._s(e.content))]):t._e(),1!=e.type?i("v-uni-view",{staticClass:"grid flex-sub padding-lr col-3 grid-square"},[t._l(e.attach,(function(a,n){return 3==e.type?i("v-uni-view",{key:n,staticClass:"bg-img",style:{backgroundImage:"url("+t.fixImgUrlFunc(a)+")"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.previewImg(e.attach,n)}}}):t._e()})),2==e.type?i("v-uni-view",{staticClass:"bg-gray",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.playAudio(e)}}},[e.playing?i("v-uni-text",{staticClass:"cuIcon-stop margin-lr-xs"}):i("v-uni-text",{staticClass:"cuIcon-playfill margin-lr-xs"})],1):t._e()],2):t._e(),i("v-uni-view",{staticClass:"text-gray text-right padding"},[i("v-uni-view",{staticClass:"inline-block"},[i("v-uni-text",{staticClass:"cuIcon-appreciatefill margin-lr-xs"}),t._v(t._s(e.likes_count))],1),i("v-uni-view",{staticClass:"inline-block margin-left"},[i("v-uni-text",{staticClass:"cuIcon-messagefill margin-lr-xs"}),t._v(t._s(e.comments.length))],1)],1),e.verify_content?i("v-uni-view",{staticClass:"cu-list menu-avatar comment solids-top"},[i("v-uni-view",{staticClass:"cu-item"},[i("v-uni-view",{staticClass:"cu-avatar round",style:{"background-image":"url("+t.fixImgUrlFunc(e.verifier_photo)+")"}}),i("v-uni-view",{staticClass:"content"},[i("v-uni-view",{staticClass:"text-grey flex justify-between "},[i("v-uni-view",{staticClass:"text-sm"},[t._v(t._s(e.verifier_name)+" 点评:")]),i("v-uni-view",{staticClass:"text-xs "},[t._v(t._s(e.add_time))])],1),i("v-uni-view",{staticClass:"radius margin-top-sm"},[i("v-uni-view",{staticClass:"flex"},[i("v-uni-view",{staticClass:"flex-sub"},[t._v(t._s(e.verify_content))]),i("v-uni-view",{staticClass:"margin-left text-lg text-orange"},[t._v(t._s(e.verify_score)+"分")])],1)],1)],1)],1)],1):i("v-uni-view",{staticClass:"padding-sm text-center"},[i("v-uni-button",{staticClass:"cu-btn bg-orange round",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.handleVerify(e.id)}}},[t._v("点 评")])],1),i("v-uni-view",{staticClass:"padding-lr padding-bottom-sm "},t._l(e.comments,(function(e,a){return i("v-uni-view",{key:a,staticClass:"bg-gray padding-xs radius margin-top-sm"},[i("v-uni-text",{staticClass:"text-sm"},[t._v(t._s(e.publisher?e.publisher.name:"评论人")+"："+t._s(e.content))])],1)})),1)],1)],1)})),0==t.list.length?i("v-uni-view",{staticClass:"text-center padding text-gray"},[t._v("暂无记录")]):t._e()],2)},s=[]},f8ff:function(t,e,i){"use strict";i("a15b"),i("d81d"),i("b680"),i("d3b7"),i("acd8"),i("e25e"),i("ac1f"),i("25f0"),i("5319"),i("841c"),i("1276");var a=i("0d5f");function n(t){if("number"!==typeof t||t<0)return t;var e=parseInt(t/3600);t%=3600;var i=parseInt(t/60);t%=60;var a=t;return[e,i,a].map((function(t){return t=t.toString(),t[1]?t:"0"+t})).join(":")}function s(t,e){return"string"===typeof t&&"string"===typeof e&&(t=parseFloat(t),e=parseFloat(e)),t=t.toFixed(2),e=e.toFixed(2),{longitude:t.toString().split("."),latitude:e.toString().split(".")}}var r={UNITS:{"年":315576e5,"月":26298e5,"天":864e5,"小时":36e5,"分钟":6e4,"秒":1e3},humanize:function(t){var e="";for(var i in this.UNITS)if(t>=this.UNITS[i]){e=Math.floor(t/this.UNITS[i])+i+"前";break}return e||"刚刚"},format:function(t){var e=this.parse(t),i=Date.now()-e.getTime();if(i<this.UNITS["天"])return this.humanize(i);var a=function(t){return t<10?"0"+t:t};return e.getFullYear()+"/"+a(e.getMonth()+1)+"/"+a(e.getDate())+"-"+a(e.getHours())+":"+a(e.getMinutes())},parse:function(t){var e=t.split(/[^0-9]/);return new Date(e[0],e[1]-1,e[2],e[3],e[4],e[5])}};function o(t){return t&&-1==t.search("http")?(a.baseUrl+t).replace("\\","/"):t}t.exports={formatTime:n,formatLocation:s,dateUtils:r,fixImgUrl:o}}}]);