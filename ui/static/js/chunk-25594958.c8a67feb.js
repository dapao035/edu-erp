(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-25594958"],{"24fd":function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return s})),n.d(t,"a",(function(){return h}));var r=n("1da1"),i=(n("96cf"),n("b775")),a=n("d282");function o(e){return l.apply(this,arguments)}function l(){return l=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["a"])({url:a["a"].orgList,method:"get",params:t}));case 1:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function u(e){return c.apply(this,arguments)}function c(){return c=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["a"])({url:"/common/org/info",method:"get",params:{id:t}}));case 1:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}function s(e){return p.apply(this,arguments)}function p(){return p=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["a"])({url:"/common/org/save",method:"post",data:t}));case 1:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}function h(e){return m.apply(this,arguments)}function m(){return m=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["a"])({url:"/common/org/delete",method:"post",data:t}));case 1:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}},"564c":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("OrgTree",{attrs:{onlyTree:!1,type:0}})],1)},i=[],a=n("d149"),o={name:"OrgList",components:{OrgTree:a["a"]},props:{},data:function(){return{}},methods:{}},l=o,u=n("2877"),c=Object(u["a"])(l,r,i,!1,null,null,null);t["default"]=c.exports},d149:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{"min-width":"210px"}},[n("el-row",{staticStyle:{"margin-bottom":"10px"},attrs:{gutter:10}},[n("el-col",[e.onlyTree?e._e():n("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("添加机构")]),n("div",{staticStyle:{display:"inline-block","margin-left":"6px","max-width":"130px"}},[n("el-input",{attrs:{placeholder:"搜索名称",size:"mini"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),n("div",{staticStyle:{display:"inline-block","margin-left":"6px"}},[n("el-button",{attrs:{icon:"el-icon-search",circle:"",size:"mini"},on:{click:function(t){return e.handleSearch()}}}),n("el-button",{attrs:{icon:"el-icon-refresh",circle:"",size:"mini"},on:{click:function(t){return e.handleRefresh()}}})],1)],1)],1),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-key":"id","highlight-current-row":"",lazy:"",load:e.load,"tree-props":{children:"children",hasChildren:"hasChildren"}},on:{"row-click":e.rowClick}},[n("el-table-column",{attrs:{prop:"name",label:e.onlyTree?"机构列表":"机构名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("b",[e._v(" "+e._s(t.row.name)+" ")])]}}])}),e.onlyTree?e._e():n("el-table-column",{attrs:{prop:"level",label:"级别"}}),e.onlyTree?e._e():n("el-table-column",{attrs:{prop:"contactName",label:"联系人"}}),e.onlyTree?e._e():n("el-table-column",{attrs:{prop:"phone",label:"电话"}}),e.onlyTree?e._e():n("el-table-column",{attrs:{label:"操作",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(n){return n.stopPropagation(),e.handleAddChild(t.row)}}},[e._v("添加子机构")]),n("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(n){return n.stopPropagation(),e.handleEdit(t.row)}}},[e._v("编辑")]),n("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(n){return n.stopPropagation(),e.handleDelete(t.row)}}},[e._v("删除")]),n("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(n){return n.stopPropagation(),e.showInfo(t.row.id)}}},[e._v("查看")])]}}],null,!1,3816045926)})],1),n("cui-dialog-form",{ref:"cuiDialogForm",attrs:{title:e.formTitle,formConfig:e.formConfig,visible:e.formVisible},on:{"update:visible":function(t){e.formVisible=t},onSubmit:e.onSubmit}})],1)},i=[],a=n("1da1"),o=(n("96cf"),n("a9e3"),n("b0c0"),n("24fd")),l=n("2934"),u=n("ed08"),c=n("cf45"),s={name:"OrgTree",components:{},props:{onlyTree:{type:Boolean,default:!0},type:{type:Number|String,default:""}},data:function(){return{name:"",tableData:[],parentId:"",formTitle:"",formConfig:{fields:[{label:"机构名",name:"name",type:"input"},{label:"级别",name:"level",type:"enum",code:"OrgLevelEnum",width:"50%"},{label:"简称",name:"shortname",type:"input",width:"50%"},{label:"联系人",name:"contactName",type:"input",width:"50%"},{label:"电话",name:"phone",type:"input",width:"50%"},{label:"传真",name:"fax",type:"input",width:"50%"},{label:"邮箱",name:"email",type:"input",width:"50%"},{label:"排序",name:"sortNum",type:"number",width:"50%"},{label:"状态",name:"state",type:"switch",width:"50%",default:!0},{label:"说明",name:"info",type:"textarea"}],rules:{name:[{required:!0,message:"请输入名称"}],level:[{required:!0,message:"请选择级别"}]},labelWidth:"90px"},formVisible:!1}},mounted:function(){this.handleRequest(0)},methods:{showInfo:function(e){this.$router.push("/teacher/orgDetail?id="+e)},handleSearch:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""!=this.name){e.next=3;break}return Object(c["e"])("请输入名称","error"),e.abrupt("return");case 3:return e.next=5,Object(o["b"])({type:this.type,name:this.name});case 5:t=e.sent,this.tableData=t;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleRefresh:function(){this.name="",this.handleRequest(0)},handleRequest:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["b"])({pid:t||0,type:this.type,name:this.name});case 2:n=e.sent,this.tableData=n;case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),load:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,n,r){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["b"])({pid:t.id});case 2:i=e.sent,r(i);case 4:case"end":return e.stop()}}),e)})));function t(t,n,r){return e.apply(this,arguments)}return t}(),handleAdd:function(){this.parentId=0,this.formTitle="新增机构",this.formVisible=!0,this.$refs.cuiDialogForm.onReset()},handleAddChild:function(e){this.parentId=e.id,this.formTitle="新增子机构",this.formVisible=!0,this.$refs.cuiDialogForm.onReset()},handleEdit:function(e){this.parentId=e.pid,this.formTitle="修改机构信息",this.formVisible=!0,this.$refs.cuiDialogForm.initFormData(e)},handleDelete:function(e){var t=this;Object(l["c"])(o["a"],[e],(function(){t.tableData=[],t.handleRequest(0)}))},onSubmit:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.pid=this.parentId,e.next=3,Object(o["d"])(t);case 3:n=e.sent,Object(u["a"])(n)&&(this.$refs.cuiDialogForm.onReset(),this.tableData=[],this.handleRequest(0));case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),rowClick:function(e){this.$emit("onSelect",e)}}},p=s,h=n("2877"),m=Object(h["a"])(p,r,i,!1,null,null,null);t["a"]=m.exports}}]);