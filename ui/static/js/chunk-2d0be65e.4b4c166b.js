(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0be65e"],{"2fa5":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("cui-search",{attrs:{config:e.searchConfig},on:{handleRequest:e.handleRequest}}),i("cui-table",{ref:"tableBuilder",attrs:{config:e.tableConfig,selectedRows:e.selectedRows},on:{"update:selectedRows":function(t){e.selectedRows=t},"update:selected-rows":function(t){e.selectedRows=t}}}),i("cui-dialog-form",{ref:"cuiDialogForm",attrs:{title:e.formTitle,formConfig:e.formConfig,visible:e.formVisible},on:{"update:visible":function(t){e.formVisible=t},onSubmit:e.onSubmit}}),i("cui-excel",{attrs:{visible:e.excelVisible,templateUrl:"/common/grade/export",importUrl:"/common/grade/import",params:{gradeId:e.gradeId}},on:{"update:visible":function(t){e.excelVisible=t}}}),i("cui-dialog",{attrs:{title:"成绩列表",visible:e.recordsVisible,width:"800px",showSubmitBtn:!1},on:{"update:visible":function(t){e.recordsVisible=t}}},[i("cui-table",{ref:"tableBuilder2",attrs:{config:e.tableConfig2,selectedRows:e.selectedRows2},on:{"update:selectedRows":function(t){e.selectedRows2=t},"update:selected-rows":function(t){e.selectedRows2=t}}})],1),i("cui-dialog-form",{ref:"cuiDialogForm2",attrs:{title:e.formTitle2,formConfig:e.formConfig2,visible:e.formVisible2},on:{"update:visible":function(t){e.formVisible2=t},onSubmit:e.onSubmit2}})],1)},r=[],o=i("1da1"),a=(i("96cf"),i("d282")),s=i("b775");function c(e){return l.apply(this,arguments)}function l(){return l=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(s["a"])({url:"/common/grade/save",method:"post",data:t}));case 1:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function u(e){return d.apply(this,arguments)}function d(){return d=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(s["a"])({url:"/common/grade/delete",method:"post",data:t}));case 1:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}function f(e){return m.apply(this,arguments)}function m(){return m=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(s["a"])({url:"/common/grade/saveRecord",method:"post",data:t}));case 1:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}function p(e){return b.apply(this,arguments)}function b(){return b=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(s["a"])({url:"/common/grade/deleteRecord",method:"post",data:t}));case 1:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}var g=i("2934"),h=i("ed08"),w={name:"GradeList",components:{},props:{},data:function(){var e=this;return{formTitle:"",excelVisible:!1,gradeId:"",tableConfig:{url:a["a"].gradeList,selectable:!0,condition:{},fields:[{title:"考核项",name:"title",width:300},{title:"考核说明",name:"info"},{title:"发布者",name:"creatorName",width:80},{title:"发布时间",name:"addTime",width:120}],actionWidth:180,actions:[{title:"编辑",click:function(t){e.formVisible=!0,e.formTitle="修改考核项信息",e.$refs.cuiDialogForm.initFormData(t)}},{title:"导入成绩",click:function(t){e.gradeId=t.id,e.excelVisible=!0}},{title:"成绩列表",click:function(t){e.gradeId=t.id,e.recordsVisible=!0,e.tableConfig2.condition={gradeId:t.id},e.$nextTick((function(){e.$refs.tableBuilder2.loadData()}))}}],topActions:[{title:"新增",icon:"el-icon-plus",type:"primary",click:function(){e.formVisible=!0,e.formTitle="新增考核项信息",e.$refs.cuiDialogForm.onReset()}},{title:"删除",icon:"el-icon-delete",click:function(){Object(g["c"])(u,e.selectedRows,(function(){return e.handleRequest()}))}}]},selectedRows:[],searchConfig:{fields:[{label:"搜索标题",name:"title",type:"input"},{label:"发布者",name:"creator",type:"selectBox",code:"staff",limit:1}]},formConfig:{fields:[{label:"考核项标题",name:"title",type:"input"},{label:"考核项说明",name:"info",type:"textarea"}],rules:{title:[{required:!0,message:"请输入标题"}]}},formVisible:!1,recordsVisible:!1,tableConfig2:{url:a["a"].gradeRecordsList,autoload:!1,indexed:!0,condition:{},fields:[{title:"考核项",name:"gradeTitle"},{title:"学生姓名",name:"studentName"},{title:"成绩",name:"score"}],actions:[{title:"编辑",click:function(t){e.formVisible2=!0,e.formTitle2="修改成绩",e.$refs.cuiDialogForm2.initFormData(t)}}],topActions:[{title:"新增",icon:"el-icon-plus",type:"primary",click:function(){e.formVisible2=!0,e.formTitle2="新增成绩",e.$refs.cuiDialogForm2.onReset()}},{title:"删除",icon:"el-icon-delete",click:function(){Object(g["c"])(p,e.selectedRows,(function(){return e.$refs.cuiDialogForm.onReset()}))}}]},selectedRows2:[],formTitle2:"",formConfig2:{fields:[{label:"选择学员",name:"studentId",type:"selectBox",code:"student",condition:{excludeStage:1},limit:1},{label:"成绩分数",name:"score",type:"number"}],rules:{studentId:[{required:!0,message:"请选择学员"}],score:[{required:!0,message:"请输入分数"}]}},formVisible2:!1}},methods:{handleRequest:function(e){e&&Object.assign(this.tableConfig.condition,e),this.$refs.tableBuilder.loadData()},onSubmit:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c(t);case 2:i=e.sent,Object(h["a"])(i)&&(this.$refs.cuiDialogForm.onReset(),this.$refs.tableBuilder.loadData());case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),onSubmit2:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.gradeId=this.gradeId,e.next=3,f(t);case 3:i=e.sent,Object(h["a"])(i)&&(this.$refs.cuiDialogForm2.onReset(),this.$refs.tableBuilder2.loadData());case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}},R=w,v=i("2877"),x=Object(v["a"])(R,n,r,!1,null,null,null);t["default"]=x.exports}}]);