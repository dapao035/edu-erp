<template>
  <view class="wepy-calendar">
    <view class="wepy-calendar-top">
      <view class="wepy-calendar-prev" @tap.stop="handleCalendar('prev')" >
        <image src="data:image/png;base64,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"/>
      </view>
      <picker class="wepy-calendar-date" mode="date" fields="month" value="{{pickerValue}}" start="{{startDate}}" end="{{endDate}}" @change="bindDateChange">
        <view class="picker" style="font-size:120%">
          {{current.year || "-"}} 年 {{current.month || "-"}} 月
        </view>
      </picker>
      <view class="wepy-calendar-next" @tap.stop="handleCalendar('next')" >
        <image src="data:image/png;base64,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"/>
      </view>
    </view>
    <view class="wepy-calendar-weeks">
      <view class="wepy-calendar-week" wx:for="{{weeks_ch}}" wx:key="{{index}}" data-idx="{{index}}">{{item}}</view>
    </view>
    <view class="wepy-calendar-days">
      <view wx:if="{{hasEmptyGrid}}" style="width: {{dayWidth}}px; line-height: {{dayWidth}}px" class="wepy-calendar-day" wx:for="{{empytGrids}}" wx:key="{{index}}" data-idx="{{index}}">
      </view>
      <view class="wepy-calendar-day"  style="width: {{dayWidth}}px;" wx:for="{{days}}" wx:key="{{index}}" data-idx="{{index}}" @tap.stop="tapDayItem({{index}})">
        <view class="day {{item.choosed ? 'selected' : ''}} {{item.today ? 'today' : ''}}">
          {{item.day}}
          <image wx:if="{{item.hasSubIcon}}" src="data:image/png;base64,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"/>
          <image wx:elif="{{item.hasIcon}}" src="data:image/png;base64,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"/>
        </view>
      </view>
    </view>
  </view>
</template>
<script>
    import wepy from 'wepy'
    let newDate = new Date()
    export default class Calendar extends wepy.component {
      props = {
        currentDate: {
          type: String,
          default: newDate.getFullYear() + '-' + (newDate.getMonth() + 1) + '-' + newDate.getDate(),
          twoWay: true
        },
        startDate: {
          type: String,
          default: (newDate.getFullYear() - 3) + '-' + (newDate.getMonth() + 1) + '-01',
          twoWay: true
        },
        endDate: {
          type: String,
          default: (newDate.getFullYear() + 3) + '-' + (newDate.getMonth() + 1) + '-28',
          twoWay: true
        },
        hasIconList: {
          type: Array,
          default: [],
          twoWay: true
        },
        hasSubIconList: { // 灰色的图标优先显示
          type: Array,
          default: [],
          twoWay: true
        }
      }
      onLoad () {
        this.setCurrentData()
        this.now.year = newDate.getFullYear()
        this.now.month = newDate.getMonth() + 1
        this.now.day = newDate.getDate();
        this.drawCalendar();
      }
      data = {
        days: [],
        current: {},
        hasEmptyGrid: false,
        empytGrids: [],
        showPicker: false,
        weeks_ch: [ '日', '一', '二', '三', '四', '五', '六' ],
        dayWidth: 0,
        now: {
          year: 0,
          month: 0,
          day: 0
        }
      }
      computed = {
        pickerValue() {
          let value = this.current.year + '-' + this.setDouble(this.current.month)
          return value
        }
      }

      watch = {
        currentDate() {
          this.setCurrentData()
        },
        current(val) {
          this.calculateDays(val.year, val.month)
        },
        hasIconList(val) {
          this.calculateDays(this.current.year, this.current.month)
        }
      }

      methods = {
        // 点击日历上某一天
        tapDayItem (index, e) {
          if (this.days[index].choosed) {
            this.days[index].choosed = false
          } else {
            this.setAllNotSelected().then(() => {
              this.days[index].choosed = true
              this.$apply()
            })
          }
          this.$emit('calChangeSelectedDay', this.current.year + '-' + this.setDouble(this.current.month) + '-' + this.setDouble(index + 1), e)
        },
        // 递增、递减切换月份
        handleCalendar(type, e) {
          const curYear = this.current.year
          const curMonth = this.current.month
          let newMonth
          let newYear
          if (type === 'prev') {
            newMonth = curMonth - 1
            newYear = curYear
            if (newMonth < 1) {
              newYear = curYear - 1
              newMonth = 12
            }
          } else {
            newMonth = curMonth + 1
            newYear = curYear
            if (newMonth > 12) {
              newYear = curYear + 1
              newMonth = 1
            }
          }
          this.current = {
            year: newYear,
            month: newMonth
          }
          this.calculateEmptyGrids(newYear, newMonth)
          // this.$apply()
          this.$emit('calChangeCurrentMonth', this.current.year + '-' + this.setDouble(this.current.month), e)
        },
        // 点击年月调用picker选择器
        bindDateChange(e) {
          console.log('datechange:', e)
          let value = e.detail.value.split('-')
          let year = parseInt(value[0])
          let month = parseInt(value[1])
          if (year === parseInt(this.current.year) && month === parseInt(this.current.month)) {
            return false
          } else {
            this.current = {
              year: year,
              month: month
            }
            this.$apply()
            this.$emit('calChangeCurrentMonth', this.current.year + '-' + this.setDouble(this.current.month), e)
          }
        }
      }

      events = {
        startRenderCalendar() {
          this.drawCalendar()
        },
      }

      getThisMonthDays(year, month) {
        return new Date(year, month, 0).getDate()
      }
      // 计算每月第一天是星期几
      getFirstDayOfWeek(year, month) {
        return new Date(Date.UTC(year, month - 1, 1)).getDay()
      }
      calculateEmptyGrids(year, month) {
        const firstDayOfWeek = this.getFirstDayOfWeek(year, month)
        let empytGrids = []
        if (firstDayOfWeek > 0) {
          for (let i = 0; i < firstDayOfWeek; i++) {
            empytGrids.push(i)
          }
          this.hasEmptyGrid = true
        }
        this.empytGrids = empytGrids
      }
      // 渲染日历格子
      calculateDays(year, month) {
        let days = []
        const thisMonthDays = this.getThisMonthDays(year, month)
        month = this.setDouble(month)
        for (let i = 1; i <= thisMonthDays; i++) {
          let day = { day: i, choosed: false }
          let checkDay = year + '-' + month + '-' + this.setDouble(i)
          if (this.hasIconList && this.hasIconList.length > 0) {
            this.hasIconList.map((item) => {
              if (checkDay === item) {
                day.hasIcon = true
              }
            })
          }
          if (this.hasSubIconList && this.hasSubIconList.length > 0) {
            this.hasSubIconList.map((item) => {
              if (checkDay === item) {
                day.hasSubIcon = true
              }
            })
          }
          if (parseInt(this.current.year) === parseInt(this.now.year) && parseInt(this.current.month) === parseInt(this.now.month) && i === parseInt(this.now.day)) {
            day.today = true
          }
          days.push(day)
        }
        this.days = days
        this.$apply()
      }
      setAllNotSelected() {
        return new Promise((resolve, reject) => {
          this.days.map((item) => {
            item.choosed = false
          })
          resolve()
        })
      }
      // 绘制日历
      drawCalendar() {
        this.calculateEmptyGrids(this.current.year, this.current.month)
        this.calculateDays(this.current.year, this.current.month)
        let getDayWidth = new Promise((resolve, reject) => {
          wx.createSelectorQuery().select('.wepy-calendar-weeks').boundingClientRect(function(rect) {
            resolve(parseInt(rect.width / 7))
          }).exec()
        })
        getDayWidth.then((width) => {
          this.dayWidth = width
          this.$apply()
        })
      }

      setDouble(value) { // 设置月或日两位数格式
        if (value) {
          value = value.toString()
          if (value.length === 2) {
            return value
          } else {
            return '0' + value
          }
        }
      }

      setCurrentData() { // 设置当前年月
        this.current = {
          year: new Date(this.currentDate).getFullYear(),
          month: new Date(this.currentDate).getMonth() + 1
        }
        this.$apply()
      }
    }
</script>
<style lang="less">
@import '../style/calendar.less';

</style>
